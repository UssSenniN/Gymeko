<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Calculadora Nutricional Academia</title>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
  <style>
    body { font-family: 'Segoe UI', sans-serif; background: #f0f2f5; margin: 0; padding: 0; }
    .container { max-width: 480px; margin: 32px auto; background: #fff; border-radius: 10px; box-shadow: 0 4px 10px rgba(0,0,0,0.08); padding: 24px; }
    h2 { text-align: center; color: #0078D7; }
    label { display: block; margin-top: 12px; }
    input, select { width: 100%; padding: 8px; margin-top: 4px; border-radius: 6px; border: 1px solid #ccc; font-size: 16px; }
    button { width: 100%; margin-top: 18px; padding: 12px; background: #0078D7; color: #fff; border: none; border-radius: 6px; font-size: 16px; cursor: pointer; }
    .resultado { margin-top: 24px; background: #eef3fb; padding: 16px; border-radius: 8px; font-size: 18px; line-height: 1.6; }
    .treino { margin-top: 16px; background: #e9f7ef; padding: 12px; border-radius: 8px; }
  </style>
</head>
<body>
  <div class="container">
    <h2>Recomendações Nutricionais e Treino</h2>
    <form id="formNutri">
      <label for="nome">Nome:</label>
      <input type="text" id="nome" required>
      <label for="peso">Peso (kg):</label>
      <input type="number" id="peso" required min="30" max="300" step="0.1">
      <label for="altura">Altura (cm):</label>
      <input type="number" id="altura" required min="120" max="250">
      <label for="idade">Idade:</label>
      <input type="number" id="idade" required min="10" max="100">
      <label for="sexo">Sexo:</label>
      <select id="sexo" required>
        <option value="">Selecione</option>
        <option value="masculino">Masculino</option>
        <option value="feminino">Feminino</option>
      </select>
      <label for="treinos">Dias de treino por semana:</label>
      <select id="treinos" required>
        <option value="3">3</option>
        <option value="4">4</option>
        <option value="5">5</option>
        <option value="6">6</option>
        <option value="7">7</option>
      </select>
      <label for="objetivo">Objetivo:</label>
      <select id="objetivo" required>
        <option value="manter">Manter peso</option>
        <option value="ganhar">Ganhar massa</option>
        <option value="perder">Perder gordura</option>
      </select>
      <label for="nivel">Nível de treino:</label>
      <select id="nivel" required onchange="mostrarTreino()">
        <option value="">Selecione</option>
        <option value="iniciante">Iniciante</option>
        <option value="intermediario">Intermediário</option>
        <option value="avancado">Avançado</option>
      </select>
      <div id="treinoExemplo" class="treino" style="display:none;"></div>
      <button type="submit">Calcular e Salvar PDF</button>
    </form>
    <div class="resultado" id="resultado"></div>
  </div>
  <script>
    // Grupos musculares organizados por dia para cada nível
    const treinos = {
      iniciante: {
        titulo: "Treino Iniciante (3x/semana)",
        dias: [
          {
            dia: "Segunda-feira",
            grupos: "Peito e Tríceps",
            detalhes: [
              "Supino reto 3x12",
              "Crucifixo 3x12",
              "Tríceps pulley 3x12",
              "Mergulho banco 3x10"
            ]
          },
          {
            dia: "Quarta-feira",
            grupos: "Costas e Bíceps",
            detalhes: [
              "Puxada frente 3x12",
              "Remada baixa 3x12",
              "Rosca direta 3x12",
              "Rosca alternada 3x10"
            ]
          },
          {
            dia: "Sexta-feira",
            grupos: "Pernas (Quadríceps, Posterior) e Abdômen",
            detalhes: [
              "Agachamento 3x12",
              "Cadeira extensora 3x12",
              "Mesa flexora 3x12",
              "Abdominal supra 3x15"
            ]
          }
        ]
      },
      intermediario: {
        titulo: "Treino Intermediário (5x/semana)",
        dias: [
          {
            dia: "Segunda-feira",
            grupos: "Peito e Tríceps",
            detalhes: [
              "Supino reto 4x10",
              "Supino inclinado 3x10",
              "Tríceps francês 3x12",
              "Tríceps corda 3x12"
            ]
          },
          {
            dia: "Terça-feira",
            grupos: "Costas e Bíceps",
            detalhes: [
              "Puxada alta 4x10",
              "Remada curvada 3x10",
              "Rosca direta 4x10",
              "Rosca martelo 3x12"
            ]
          },
          {
            dia: "Quarta-feira",
            grupos: "Pernas (Quadríceps, Posterior) e Glúteos",
            detalhes: [
              "Agachamento livre 4x10",
              "Leg press 3x12",
              "Mesa flexora 3x12",
              "Glúteo máquina 3x15"
            ]
          },
          {
            dia: "Quinta-feira",
            grupos: "Ombro e Abdômen",
            detalhes: [
              "Desenvolvimento 4x10",
              "Elevação lateral 3x12",
              "Abdominal infra 4x15",
              "Prancha 3x30s"
            ]
          },
          {
            dia: "Sexta-feira",
            grupos: "Posterior Completo e Panturrilha",
            detalhes: [
              "Stiff 4x10",
              "Mesa flexora 4x10",
              "Panturrilha em pé 4x15",
              "Abdominal oblíquo 3x15"
            ]
          }
        ]
      },
      avancado: {
        titulo: "Treino Avançado (6x/semana)",
        dias: [
          {
            dia: "Segunda-feira",
            grupos: "Upper (Peito, Costas, Ombro, Bíceps, Tríceps)",
            detalhes: [
              "Supino reto 4x8",
              "Remada curvada 4x8",
              "Desenvolvimento Arnold 4x10",
              "Rosca direta 3x10",
              "Tríceps testa 3x10"
            ]
          },
          {
            dia: "Terça-feira",
            grupos: "Lower (Quadríceps, Posterior, Glúteos, Panturrilha)",
            detalhes: [
              "Agachamento livre 5x8",
              "Leg press 4x10",
              "Mesa flexora 4x10",
              "Glúteo máquina 3x12",
              "Panturrilha sentada 4x15"
            ]
          },
          {
            dia: "Quarta-feira",
            grupos: "Peito e Tríceps",
            detalhes: [
              "Supino inclinado 4x8",
              "Crucifixo inclinado 3x10",
              "Tríceps corda 4x10",
              "Mergulho banco 3x12"
            ]
          },
          {
            dia: "Quinta-feira",
            grupos: "Costas e Bíceps",
            detalhes: [
              "Puxada frente 4x8",
              "Remada unilateral 4x10",
              "Rosca alternada 4x10",
              "Rosca martelo 3x12"
            ]
          },
          {
            dia: "Sexta-feira",
            grupos: "Ombro e Abdômen",
            detalhes: [
              "Desenvolvimento militar 4x8",
              "Elevação lateral 4x10",
              "Abdominal infra 4x15",
              "Prancha 3x40s"
            ]
          },
          {
            dia: "Sábado",
            grupos: "Posterior Completo e Abdômen",
            detalhes: [
              "Stiff 4x10",
              "Mesa flexora 4x10",
              "Panturrilha em pé 4x15",
              "Abdominal oblíquo 4x15"
            ]
          }
        ]
      }
    };

    function mostrarTreino() {
      const nivel = document.getElementById('nivel').value;
      const treinoDiv = document.getElementById('treinoExemplo');
      if (treinos[nivel]) {
        treinoDiv.style.display = 'block';
        let html = `<strong>${treinos[nivel].titulo}</strong><ul>`;
        treinos[nivel].dias.forEach((diaObj) => {
          html += `<li><strong>${diaObj.dia}:</strong> ${diaObj.grupos}<br><small>${diaObj.detalhes.join(', ')}</small></li>`;
        });
        html += '</ul>';
        treinoDiv.innerHTML = html;
      } else {
        treinoDiv.style.display = 'none';
        treinoDiv.innerHTML = '';
      }
    }

    document.getElementById('formNutri').addEventListener('submit', function(e){
      e.preventDefault();
      const nome = document.getElementById('nome').value.trim();
      const peso = parseFloat(document.getElementById('peso').value);
      const altura = parseFloat(document.getElementById('altura').value);
      const idade = parseInt(document.getElementById('idade').value);
      const sexo = document.getElementById('sexo').value;
      const treinosSemana = parseInt(document.getElementById('treinos').value);
      const objetivo = document.getElementById('objetivo').value;
      const nivel = document.getElementById('nivel').value;

      // Cálculo de proteína (g/kg): manter=1.5, ganhar=2, perder=2.2
      let prot = objetivo === 'manter' ? 1.5 : objetivo === 'ganhar' ? 2 : 2.2;
      let proteina = peso * prot;

      // Carboidrato (g/kg): manter=4, ganhar=5, perder=3
      let carb = objetivo === 'manter' ? 4 : objetivo === 'ganhar' ? 5 : 3;
      let carboidrato = peso * carb;

      // Água: 35ml/kg
      let agua = peso * 0.035;

      // Calorias estimadas (simples): 
      let tmb = sexo === 'masculino'
        ? 88.36 + (13.4 * peso) + (4.8 * altura) - (5.7 * idade)
        : 447.6 + (9.2 * peso) + (3.1 * altura) - (4.3 * idade);
      let fatorAtiv = 1.2 + (treinosSemana-3)*0.1; // quanto mais treino, maior o fator
      let calorias = tmb * fatorAtiv;
      if(objetivo === 'ganhar') calorias += 300;
      if(objetivo === 'perder') calorias -= 300;

      // Monta treino semanal
      let treinoHtml = '';
      if (treinos[nivel]) {
        treinoHtml = `<strong>${treinos[nivel].titulo}</strong><ul>`;
        treinos[nivel].dias.forEach((diaObj) => {
          treinoHtml += `<li><strong>${diaObj.dia}:</strong> ${diaObj.grupos}<br><small>${diaObj.detalhes.join(', ')}</small></li>`;
        });
        treinoHtml += '</ul>';
      }

      // Mostra resultado na tela
      document.getElementById('resultado').innerHTML = `
        <strong>Nome:</strong> ${nome}<br>
        <strong>Peso:</strong> ${peso} kg<br>
        <strong>Altura:</strong> ${altura} cm<br>
        <strong>Idade:</strong> ${idade} anos<br>
        <strong>Sexo:</strong> ${sexo}<br>
        <strong>Dias de treino/semana:</strong> ${treinosSemana}<br>
        <strong>Objetivo:</strong> ${objetivo}<br>
        <strong>Nível:</strong> ${nivel}<br>
        <hr>
        <strong>Proteína:</strong> ${proteina.toFixed(0)}g/dia<br>
        <strong>Carboidrato:</strong> ${carboidrato.toFixed(0)}g/dia<br>
        <strong>Água:</strong> ${agua.toFixed(2)} litros/dia<br>
        <strong>Calorias estimadas:</strong> ${calorias.toFixed(0)} kcal/dia
        <hr>
        <strong>Treino semanal sugerido:</strong><br>
        ${treinoHtml}
        <button id="btnSalvarPDF" style="margin-top:16px;">Salvar informações em PDF</button>
      `;

      setTimeout(() => {
        const btnSalvar = document.getElementById('btnSalvarPDF');
        if(btnSalvar) {
          btnSalvar.onclick = function() {
            const { jsPDF } = window.jspdf;
            const doc = new jsPDF();

            let y = 15;
            doc.setFontSize(14);
            doc.text(`Plano Nutricional e Treino - ${nome}`, 10, y);
            y += 10;
            doc.setFontSize(11);
            doc.text(`Peso: ${peso} kg`, 10, y); y += 7;
            doc.text(`Altura: ${altura} cm`, 10, y); y += 7;
            doc.text(`Idade: ${idade} anos`, 10, y); y += 7;
            doc.text(`Sexo: ${sexo}`, 10, y); y += 7;
            doc.text(`Dias de treino/semana: ${treinosSemana}`, 10, y); y += 7;
            doc.text(`Objetivo: ${objetivo}`, 10, y); y += 7;
            doc.text(`Nível: ${nivel}`, 10, y); y += 10;

            doc.setFontSize(12);
            doc.text("Recomendações diárias:", 10, y); y += 7;
            doc.setFontSize(11);
            doc.text(`Proteína: ${proteina.toFixed(0)}g/dia`, 10, y); y += 6;
            doc.text(`Carboidrato: ${carboidrato.toFixed(0)}g/dia`, 10, y); y += 6;
            doc.text(`Água: ${agua.toFixed(2)} litros/dia`, 10, y); y += 6;
            doc.text(`Calorias estimadas: ${calorias.toFixed(0)} kcal/dia`, 10, y); y += 10;

            if (treinos[nivel]) {
              doc.setFontSize(12);
              doc.text("Treino semanal sugerido:", 10, y); y += 7;
              doc.setFontSize(11);
              treinos[nivel].dias.forEach((diaObj) => {
                doc.text(`${diaObj.dia}: ${diaObj.grupos}`, 10, y); y += 6;
                diaObj.detalhes.forEach(exercicio => {
                  doc.text(`- ${exercicio}`, 14, y); y += 5;
                  if (y > 270) { doc.addPage(); y = 15; }
                });
                y += 2;
                if (y > 270) { doc.addPage(); y = 15; }
              });
            }

            doc.save(`${nome.replace(/\s+/g,'_').toLowerCase()}_plano.pdf`);
          }
        }
      }, 100);
          });
  </script>
</body>
</html>
